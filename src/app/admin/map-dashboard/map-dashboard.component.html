<div class="map-dashboard-container">
  <agm-map class="map-top" [latitude]="location.lat" [longitude]="location.lng" [zoom]="9" [mapTypeControl]="true"
    [fitBounds]="true" [fullscreenControl]="true">
    <agm-overlay *ngFor="let item of captains" [latitude]="item.vehicle.currentLocation.latitude"
      [longitude]="item.vehicle.currentLocation.longitude" (markerClick)="clickedMarker(infowindow)">
      <div class="stop-marker">
        <svg width="40" height="50" viewBox="0 0 50 58" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g>
            <path
              d="M25.293 0C14.793 0 6.25 8.54297 6.25 19.043C6.25 23.1982 7.5625 27.1465 10.0488 30.459L24.1191 49.4093C24.1543 49.4552 24.208 49.4728 24.2471 49.5138C24.9502 50.2667 25.9648 50.0772 26.4658 49.4093C30.5176 44.003 37.9443 33.9062 40.7998 30.0977C40.7998 30.0977 40.8008 30.0947 40.8018 30.0928L40.8193 30.0693C43.1201 26.8369 44.3359 23.0244 44.3359 19.043C44.3359 8.54297 35.793 0 25.293 0ZM25.293 29.3164C19.6396 29.3164 15.0195 24.6963 15.0195 19.043C15.0195 13.3896 19.6396 8.76953 25.293 8.76953C30.9463 8.76953 35.5664 13.3896 35.5664 19.043C35.5664 24.6963 30.9463 29.3164 25.293 29.3164Z"
              [ngStyle]="{'fill':location.color}" />
            <circle cx="25" cy="18.75" r="10.9375" fill="white" />
          </g>
          <defs>
            <filter id="filter0_d" x="-4" y="0" width="58" height="58" filterUnits="userSpaceOnUse"
              color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix" />
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" />
              <feOffset dy="4" />
              <feGaussianBlur stdDeviation="2" />
              <feColorMatrix type="matrix" values="0 0 0 0 0.439216 0 0 0 0 0.439216 0 0 0 0 0.439216 0 0 0 0.5 0" />
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow" />
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow" result="shape" />
            </filter>
          </defs>
        </svg>
      </div>

      <agm-info-window #infowindow>
        <div class="p-2">
          <div class="row x-font-bold">
            <div class="col-12 d-flex flex-column align-items-center" *ngIf="item.profileImageUrl">
              <img class="imgInfo" [src]="item.profileImageUrl">
            </div>
            <div class="col-6" *ngIf="item.name">الاسم : </div>
            <div class="col-6" dir="ltr" *ngIf="item.name">{{item.name}}</div>
            <div class="col-6" *ngIf="item.phoneNumber">رقم الموبايل : </div>
            <div class="col-6" dir="ltr" *ngIf="item.phoneNumber">{{item.phoneNumber}}</div>
            <ng-container *ngIf="item.vehicle">
              <div class="col-6" *ngIf="item.vehicle.plateNumber">لوحة السيارة : </div>
              <div class="col-6" dir="ltr" *ngIf="item.vehicle.plateNumber">{{item.vehicle.plateNumber}}</div>
              <div class="col-6" *ngIf="item.vehicle.model">موديل السيارة : </div>
              <div class="col-6" dir="ltr" *ngIf="item.vehicle.model">{{item.vehicle.model}}</div>
              <div class="col-6" *ngIf="item.vehicle.color">لون السيارة : </div>
              <div class="col-6" dir="ltr" *ngIf="item.vehicle.color">{{item.vehicle.color}}</div>
            </ng-container>
          </div>
        </div>
      </agm-info-window>
    </agm-overlay>
  </agm-map>
  <div class="w-100 mt-3 x-font-bold d-flex align-items-center">
    <div class="city-div  ms-auto me-auto d-flex align-items-center" *ngFor="let item of provinces;let i =index;">
      <input [name]="item.name" [value]="item.id" type="radio" [(ngModel)]="activeProvince" [id]="item.id"
        (change)="handleProvinceChange(i)">
      <label class="me-3" [for]="item.name">{{item.name}}</label>
    </div>
  </div>
</div>