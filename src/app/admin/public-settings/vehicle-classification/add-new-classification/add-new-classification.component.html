<div class="class-header x-font-regular ">
  <h2 *ngIf="pageTypeEnum.add == activePageType">إضافة تصنيف</h2>
  <h2 *ngIf="pageTypeEnum.edit == activePageType">تعديل تصنيف</h2>
  <h2 *ngIf="pageTypeEnum.view == activePageType">عرض تصنيف</h2>
</div>

<div class="d-flex flex-wrap justify-content-center mt-4 mb-3 x-font-regular vehicle-classification-settings">
  <form (ngSubmit)="onSubmit()" [formGroup]="generalFields">
    <div class="image-container">
      <div class="user-img">
        <img src="../../../assets/img/user.png" alt="user image">
        <div class="file-upload">
          <label for="file-upload" class="file-upload__label">+</label>
          <input id="file-upload" type="file" class="file-upload__input" formControlName="image"
            (change)="onFileChange($event)" />
        </div>
      </div>
    </div>


    <div class="w-100 d-flex flex-wrap justify-content-around">
      <div class="form-item head-item col-3">
        <mat-form-field class="example-full-width">
          <mat-label>اسم التصنيف بالعربي</mat-label>
          <input matInput formControlName="arabicName">
          <mat-error *ngIf="generalFields.controls.arabicName.invalid && generalFields.controls.arabicName.touched">
            {{getErrorRequiredMessage()}}</mat-error>
        </mat-form-field>
      </div>

      <div class="form-item head-item col-3">
        <mat-form-field class="example-full-width">
          <mat-label>اسم التصنيف بالانجليزي</mat-label>
          <input matInput formControlName="englishName">
          <mat-error *ngIf="generalFields.controls.englishName.invalid && generalFields.controls.englishName.touched">
            {{getErrorRequiredMessage()}}</mat-error>
        </mat-form-field>
      </div>

      <div class="form-item head-item col-3">
        <mat-form-field class="example-full-width">
          <mat-label>عدد المقاعد</mat-label>
          <input matInput formControlName="numOfSites">
          <mat-error *ngIf="generalFields.controls.numOfSites.invalid && generalFields.controls.numOfSites.touched">
            {{getErrorRequiredMessage()}}</mat-error>
        </mat-form-field>
      </div>

      <div class="form-item head-item col-3">
        <mat-form-field class="example-full-width">
          <mat-label>نسبة السائق بالمئة</mat-label>
          <input matInput formControlName="driverRatio">
          <mat-error *ngIf="generalFields.controls.driverRatio.invalid && generalFields.controls.driverRatio.touched">
            {{getErrorRequiredMessage()}}</mat-error>
        </mat-form-field>
      </div>

    </div>
    <div class="d-flex flex-wrap justify-content-between mt-5 x-font-regular ">
      <div class="w-100 d-flex flex-column align-items-start day-rent-container">
        <h4 class="rent-header text-center x-font-bold mb-3 mt-5">الأجور خلال الصباح</h4>
        <div class="row">
          <div class="form-item col-3">
            <mat-form-field class="example-full-width">
              <mat-label>أقل أجرة</mat-label>
              <input matInput name="morningLowestRent" formControlName="morningLowestRent">
              <mat-error *ngIf="generalFields.controls.morningLowestRent.invalid">{{getErrorRequiredMessage()}}
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-item col-3">
            <mat-form-field class="example-full-width">
              <mat-label>تكلفة الرحلة من أجل كل 1 كم</mat-label>
              <input matInput name="morningOne_Km" formControlName="morningOne_Km">
              <mat-error *ngIf="generalFields.controls.morningOne_Km.invalid">{{getErrorRequiredMessage()}}
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-item col-3">
            <mat-form-field>
              <mat-label>وقت ابتداء الفترة </mat-label>
              <input matInput name="selected_time_A" formControlName="morningBegin" [ngxMatTimepicker]="pickerA"
                readonly />
              <mat-icon matSuffix (click)="pageTypeEnum.view == activePageType ? null : pickerA.open()">
                watch_later
              </mat-icon>
            </mat-form-field>
            <ngx-mat-timepicker #pickerA></ngx-mat-timepicker>
          </div>
          <div class="form-item col-3">
            <mat-form-field>
              <mat-label>وقت انتهاء الفترة </mat-label>
              <input matInput name="selected_time_A" formControlName="morningEnd" [ngxMatTimepicker]="pickerB"
                readonly />
              <mat-icon matSuffix (click)="pageTypeEnum.view == activePageType ? null : pickerB.open()">
                watch_later
              </mat-icon>
            </mat-form-field>
            <ngx-mat-timepicker #pickerB></ngx-mat-timepicker>
          </div>

          <h6 class="x-font-regular col-12">
            التكلفة الإضافية للمسافات التي يقطعها السائق ليصل للزبون يُضاف للفاتورة تكلفة حسب المجال
          </h6>
          <div class="form-item col-6">
            <mat-form-field class="example-full-width">
              <mat-label>
                التكلفة للمجال الأول
                <span>5 كم</span> - <span>9 كم</span>
              </mat-label>
              <input matInput name="morningFirstExtraCost" formControlName="morningFirstExtraCost">
              <mat-error *ngIf="generalFields.controls.morningFirstExtraCost.invalid">
                {{getErrorRequiredMessage()}}</mat-error>
            </mat-form-field>
          </div>
          <div class="form-item col-6">
            <mat-form-field class="example-full-width">
              <mat-label>
                التكلفة للمجال الثاني
                <span>9 كم</span> - <span>15 كم</span>
              </mat-label> <input matInput name="morningSecondExtraCost" formControlName="morningSecondExtraCost">
              <mat-error *ngIf="generalFields.controls.morningSecondExtraCost.invalid">
                {{getErrorRequiredMessage()}}</mat-error>
            </mat-form-field>
          </div>
          <h6 class="x-font-regular col-12">
            من أجل كل 10 دقائق يتم إيقاف الرحلة فيها من قبل الزبون يُضاف للفاتورة
          </h6>
          <div class="form-item col-6">
            <mat-form-field class="example-full-width">
              <mat-label>الكلفة</mat-label>
              <input matInput name="morningTen_M" formControlName="morningTen_M">
              <mat-error *ngIf="generalFields.controls.morningTen_M.invalid">{{getErrorRequiredMessage()}}
              </mat-error>
            </mat-form-field>
          </div>

          <h6 class="x-font-regular col-12">
            الرحلة المفتوحة
          </h6>
          <div class="row d-flex align-items-center">
            <div class="form-item col-5">
              <mat-form-field class="example-full-width">
                <mat-label>مدة الرحلة بالساعات</mat-label>
                <input matInput name="openTripTime" formControlName="openTripTime" [(ngModel)]="openTripTime">
              </mat-form-field>
            </div>
            <div class="form-item col-5">
              <mat-form-field class="example-full-width">
                <mat-label>كلفة الرحلة</mat-label>
                <input matInput name="tripCost" formControlName="tripCost" [(ngModel)]="tripCost">
              </mat-form-field>
            </div>
            <button type="button" class="btn t_btn_blue col-2" (click)="addToOpenTrip('morning')">
              إضافة
            </button>
          </div>
          <div class="jay_taxi_table">
            <div class="table_div d-flex flex-column align-items-center">
              <table class="table">
                <thead class="x-font-bold">
                  <th>المدة بالساعات</th>
                  <th>التكلفة</th>
                </thead>
                <tbody>
                  <tr *ngFor="let item of openTripCost.morning">
                    <td>{{item.openTripTime}}</td>
                    <td>{{item.tripCost}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

        </div>
      </div>

      <div class="w-100 d-flex flex-column align-items-start day-rent-container">
        <h4 class="rent-header text-center x-font-bold mb-3 mt-5">الأجور خلال النهار</h4>
        <div class="row">
          <div class="form-item col-3">
            <mat-form-field class="example-full-width">
              <mat-label>أقل أجرة</mat-label>
              <input matInput name="dayLowestRent" formControlName="dayLowestRent">
              <mat-error *ngIf="generalFields.controls.dayLowestRent.invalid">{{getErrorRequiredMessage()}}
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-item col-3">
            <mat-form-field class="example-full-width">
              <mat-label>تكلفة الرحلة من أجل كل 1 كم</mat-label>
              <input matInput name="dayOne_Km" formControlName="dayOne_Km">
              <mat-error *ngIf="generalFields.controls.dayOne_Km.invalid">{{getErrorRequiredMessage()}}
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-item col-3">
            <mat-form-field>
              <mat-label>وقت ابتداء الفترة </mat-label>
              <input matInput name="selected_time_A" formControlName="dayBegin" [ngxMatTimepicker]="pickerC" readonly />
              <mat-icon matSuffix (click)="pageTypeEnum.view == activePageType ? null : pickerC.open()">
                watch_later
              </mat-icon>
            </mat-form-field>
            <ngx-mat-timepicker #pickerC></ngx-mat-timepicker>
          </div>
          <div class="form-item col-3">
            <mat-form-field>
              <mat-label>وقت انتهاء الفترة </mat-label>
              <input matInput name="selected_time_A" formControlName="dayEnd" [ngxMatTimepicker]="pickerD" readonly />
              <mat-icon matSuffix (click)="pageTypeEnum.view == activePageType ? null : pickerD.open()">
                watch_later
              </mat-icon>
            </mat-form-field>
            <ngx-mat-timepicker #pickerD></ngx-mat-timepicker>
          </div>
          <h6 class="x-font-regular col-12">
            التكلفة الإضافية للمسافات التي يقطعها السائق ليصل للزبون يُضاف للفاتورة تكلفة حسب المجال
          </h6>
          <div class="form-item col-6">
            <mat-form-field class="example-full-width">
              <mat-label>
                التكلفة للمجال الأول
                <span>5 كم</span> - <span>9 كم</span>
              </mat-label>
              <input matInput name="dayFirstExtraCost" formControlName="dayFirstExtraCost">
              <mat-error *ngIf="generalFields.controls.dayFirstExtraCost.invalid">
                {{getErrorRequiredMessage()}}</mat-error>
            </mat-form-field>
          </div>
          <div class="form-item col-6">
            <mat-form-field class="example-full-width">
              <mat-label>
                التكلفة للمجال الثاني
                <span>9 كم</span> - <span>15 كم</span>
              </mat-label> <input matInput name="daySecondExtraCost" formControlName="daySecondExtraCost">
              <mat-error *ngIf="generalFields.controls.daySecondExtraCost.invalid">
                {{getErrorRequiredMessage()}}</mat-error>
            </mat-form-field>
          </div>
          <h6 class="x-font-regular col-12">
            من أجل كل 10 دقائق يتم إيقاف الرحلة فيها من قبل الزبون يُضاف للفاتورة
          </h6>
          <div class="form-item col-6">
            <mat-form-field class="example-full-width">
              <mat-label>الكلفة</mat-label>
              <input matInput name="dayTen_M" formControlName="dayTen_M">
              <mat-error *ngIf="generalFields.controls.dayTen_M.invalid">{{getErrorRequiredMessage()}}
              </mat-error>
            </mat-form-field>
          </div>
          
          <h6 class="x-font-regular col-12">
            الرحلة المفتوحة
          </h6>
          <div class="row d-flex align-items-center">
            <div class="form-item col-5">
              <mat-form-field class="example-full-width">
                <mat-label>مدة الرحلة بالساعات</mat-label>
                <input matInput name="openTripTime" formControlName="openTripTime" [(ngModel)]="openTripTime">
              </mat-form-field>
            </div>
            <div class="form-item col-5">
              <mat-form-field class="example-full-width">
                <mat-label>كلفة الرحلة</mat-label>
                <input matInput name="tripCost" formControlName="tripCost" [(ngModel)]="tripCost">
              </mat-form-field>
            </div>
            <button type="button" class="btn t_btn_blue col-2" (click)="addToOpenTrip('day')">
              إضافة
            </button>
          </div>
          <div class="jay_taxi_table">
            <div class="table_div d-flex flex-column align-items-center">
              <table class="table">
                <thead class="x-font-bold">
                  <th>المدة بالساعات</th>
                  <th>التكلفة</th>
                </thead>
                <tbody>
                  <tr *ngFor="let item of openTripCost.day">
                    <td>{{item.openTripTime}}</td>
                    <td>{{item.tripCost}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          
        </div>
      </div>


      <div class="w-100 d-flex flex-column align-items-start day-rent-container">
        <h4 class="rent-header text-center x-font-bold mb-3 mt-5">الأجور خلال الليل</h4>
        <div class="row">
          <div class="form-item col-3">
            <mat-form-field class="example-full-width">
              <mat-label>أقل أجرة</mat-label>
              <input matInput name="nightLowestRent" formControlName="nightLowestRent">
              <mat-error *ngIf="generalFields.controls.nightLowestRent.invalid">{{getErrorRequiredMessage()}}
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-item col-3">
            <mat-form-field class="example-full-width">
              <mat-label>تكلفة الرحلة من أجل كل 1 كم</mat-label>
              <input matInput name="nightOne_Km" formControlName="nightOne_Km">
              <mat-error *ngIf="generalFields.controls.nightOne_Km.invalid">{{getErrorRequiredMessage()}}
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-item col-3">
            <mat-form-field>
              <mat-label>وقت ابتداء الفترة </mat-label>
              <input matInput name="selected_time_A" formControlName="nightBegin" [ngxMatTimepicker]="pickerE"
                readonly />
              <mat-icon matSuffix (click)="pageTypeEnum.view == activePageType ? null : pickerE.open()">
                watch_later
              </mat-icon>
            </mat-form-field>
            <ngx-mat-timepicker #pickerE></ngx-mat-timepicker>
          </div>
          <div class="form-item col-3">
            <mat-form-field>
              <mat-label>وقت انتهاء الفترة </mat-label>
              <input matInput name="selected_time_A" formControlName="nightEnd" [ngxMatTimepicker]="pickerF" readonly />
              <mat-icon matSuffix (click)="pageTypeEnum.view == activePageType ? null : pickerF.open()">
                watch_later
              </mat-icon>
            </mat-form-field>
            <ngx-mat-timepicker #pickerF></ngx-mat-timepicker>
          </div>
          <h6 class="x-font-regular col-12">
            التكلفة الإضافية للمسافات التي يقطعها السائق ليصل للزبون يُضاف للفاتورة تكلفة حسب المجال
          </h6>
          <div class="form-item col-6">
            <mat-form-field class="example-full-width">
              <mat-label>
                التكلفة للمجال الأول
                <span>5 كم</span> - <span>9 كم</span>
              </mat-label>
              <input matInput name="nightFirstExtraCost" formControlName="nightFirstExtraCost">
              <mat-error *ngIf="generalFields.controls.nightFirstExtraCost.invalid">
                {{getErrorRequiredMessage()}}</mat-error>
            </mat-form-field>
          </div>
          <div class="form-item col-6">
            <mat-form-field class="example-full-width">
              <mat-label>
                التكلفة للمجال الثاني
                <span>9 كم</span> - <span>15 كم</span>
              </mat-label> <input matInput name="nightSecondExtraCost" formControlName="nightSecondExtraCost">
              <mat-error *ngIf="generalFields.controls.nightSecondExtraCost.invalid">
                {{getErrorRequiredMessage()}}</mat-error>
            </mat-form-field>
          </div>
          <h6 class="x-font-regular col-12">
            من أجل كل 10 دقائق يتم إيقاف الرحلة فيها من قبل الزبون يُضاف للفاتورة
          </h6>
          <div class="form-item col-6">
            <mat-form-field class="example-full-width">
              <mat-label>الكلفة</mat-label>
              <input matInput name="nightTen_M" formControlName="nightTen_M">
              <mat-error *ngIf="generalFields.controls.nightTen_M.invalid">{{getErrorRequiredMessage()}}
              </mat-error>
            </mat-form-field>
          </div>
          
          <h6 class="x-font-regular col-12">
            الرحلة المفتوحة
          </h6>
          <div class="row d-flex align-items-center">
            <div class="form-item col-5">
              <mat-form-field class="example-full-width">
                <mat-label>مدة الرحلة بالساعات</mat-label>
                <input matInput name="openTripTime" formControlName="openTripTime" [(ngModel)]="openTripTime">
              </mat-form-field>
            </div>
            <div class="form-item col-5">
              <mat-form-field class="example-full-width">
                <mat-label>كلفة الرحلة</mat-label>
                <input matInput name="tripCost" formControlName="tripCost" [(ngModel)]="tripCost">
              </mat-form-field>
            </div>
            <button type="button" class="btn t_btn_blue col-2" (click)="addToOpenTrip('night')">
              إضافة
            </button>
          </div>
          <div class="jay_taxi_table">
            <div class="table_div d-flex flex-column align-items-center">
              <table class="table">
                <thead class="x-font-bold">
                  <th>المدة بالساعات</th>
                  <th>التكلفة</th>
                </thead>
                <tbody>
                  <tr *ngFor="let item of openTripCost.night">
                    <td>{{item.openTripTime}}</td>
                    <td>{{item.tripCost}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          
        </div>
      </div>

      <div class="x-font-bold row w-100 d-flex justify-content-center mt-5">
        <div class="col-6 d-flex justify-content-center" *ngIf="pageTypeEnum.view != activePageType">
          <button type="submit" *ngIf="pageTypeEnum.add == activePageType"
            class="btn t_btn_blue_outline w-50">أضف</button>
          <button *ngIf="pageTypeEnum.edit == activePageType" class="btn t_btn_blue_outline w-50">حفظ</button>
        </div>
        <div class="col-6 d-flex justify-content-center">
          <button class="btn t_btn_blue w-50" routerLink="/vehicle-classification"
            routerLinkActive="router-link-active">
            عودة إلى القائمة
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
